# ArkUI-X社区代码仓管理制度

| **文件名称** | **版本** | **拟制/修订日期** | **拟 制** | **批准** |
| -------------------- | ------ | ----------- | --------- | ------ |
| ArkUI-X社区代码仓管理制度 | V1.0 | 2022-09-30 | PMC | PMC |

## 1 目的

为规范ArkUI-X社区代码仓操作要求，指导社区角色进行规范化操作，确保社区的代码稳定且有质量的发展，达成可信开源社区要求，制定ArkUI-X社区代码仓管理制度。

## 2 适用范围

- **社区角色：包括Contributor、Committer、PMC，角色定义见：**

| **社区角色** | **成员名单** |
| ----------- | ---------------------------------------- |
| PMC | [PMC](https://gitee.com/arkui-x/community/blob/master/governance.md) |
| Committer | [Committer](https://gitee.com/arkui-x/community/blob/master/zh/committer.md) |
| Contributor | - |

- **Gitee IT系统角色** 

| **系统角色** | **角色定义** | **成员名单** |
| -------- | ---------------------------------------- | --------------------------- |
| IT 系统管理员 | ArkUI-X 的代码仓系统管理员，负责配置IT 系统操作员 | PMC主席兼任 |
| IT 系统操作员 | ArkUI-X 的代码仓系统操作员，负责根据业务决策进行IT系统操作实施 | 由PMC主席任命 |

*注：为确保IT管理与IT实施人员分离，同一人不能同时担任IT系统管理员和IT系统操作员。*

## 3 代码仓说明

ArkUI-X代码仓指主仓和镜像仓下的代码仓库，存放ArkUI-X项目所有代码。

- 主仓: https://gitee.com/arkui-x
- 镜像仓: https://github.com/arkui-x

## 4 代码仓的管理要求

为规范社区代码仓操作，降低风险，任何对代码仓库的操作都要求遵循“先进行业务决策，再进行IT实施”的原则进行，业务决策与IT实施分离；禁止任何未经过决策的IT实施。 

下表规定了针对代码仓不同场景下的决策组织/角色及实施组织/角色

- 所有代码仓操作的决策组织为PMC 

- 部分操作场景已由PMC授权到对应的组织/角色 

- 如存在表中未覆盖的代码仓操作场景，缺省决策组织为PMC 

- 所有代码仓操作的IT实施组织为IT系统操作员 

| | 操作类型 | 操作 | 描述 | 决策组织/角色 | 被授权决策组织/角色（如有授权） | 实施组织/角色 |
| ------ | ------- | ---------- | ---------------------------------------- | ------- | ---------------- | ------- |
| 代码仓库操作 | 新建 | 新建 | 创建代码仓，从无到有 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 废弃 | 废弃 | 因为业务变化,仓库不再使用, 修改状态为暂停/停止 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库属性配置 | 修改仓库描述 | | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库属性配置 | 设置安全风险标识 | 设置后允许提交安全issue, 仅允许企业成员+仓库成员查看 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库属性配置 | 是否允许在线编辑 | | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库属性配置 | 设置禁止强制push | 保护库上代码不被误操作覆盖导致丢失历史记录 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库属性配置 | 分支保护规则设置 | 防止分支被误操作删除/强制推送 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库属性配置 | 推送规则设置 | 限制单个文件大小 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库人员管理 | 代码审查设置 | 给committer添加审查权限, 给门禁账号添加测试权限 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 仓库人员管理 | 仓库管理员维护 | 将committer添加到仓库,设置为管理员角色; 非committer从仓库删除 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 版本分支管理 | 新建分支/标签 | 按PMC版本规划从指定节点新建分支,从指定分支新建标签 | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 例外合入操作类 | 三方软件版本升级 | 三方软件的版本升级往往携带上游社区提交，因而导致DCO检查失败,在确认合入PR失败仅由DCO失败引起并且不存在法务合规问题的情况下，需要例外合入PR | PMC | 不授权 | IT系统操作员 |
| 代码仓库操作 | 例外合入操作类 | 紧急情况回退PR | 由于合入PR导致的编译问题，经过PR提交人/Committer+IT系统操作员共同确认后, 需要例外回退PR | PMC | Committer | IT系统操作员 |
| 代码仓库操作 | 例外合入操作类 | 其它情况 | 其它紧急情况的例外合入 | PMC | 不授权 | IT系统操作员 |

## 5 审视

- 每个季度由IT 系统操作员输出 代码仓操作 及 人员的权限配置 的变更报告，送递 IT系统管理员。 

- IT系统管理员负责审查变更报告，确保及时发现异常或违规操作，在PMC例会上进行通报并制定改进措施。 

## 6 变更记录

本制度由ArkUI-X PMC制定及修改。 